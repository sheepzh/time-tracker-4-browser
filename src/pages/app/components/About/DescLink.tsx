import { css } from '@emotion/css'
import { ElLink } from "element-plus"
import { defineComponent, h, useSlots } from "vue"

type Icon = "Github" | "ElementPlus" | "Echarts" | "Vue"

const ICON_BACKGROUND: Record<Icon, string> = {
    Github: `url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z'/%3E%3C/svg%3E")`,
    ElementPlus: `url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024'%3E%3Cpath d='M870.632727 753.338182c0 36.538182-19.316364 44.916364-19.316363 44.916363L500.596364 1000.727273A39.330909 39.330909 0 0 1 465.454545 1000.727273S121.018182 800.581818 108.450909 791.272727a30.021818 30.021818 0 0 1-12.8-23.272727V354.676364c0-18.152727 23.272727-30.952727 23.272727-30.952728l343.272728-198.981818a46.545455 46.545455 0 0 1 41.658181 0l336.523637 195.723637a47.941818 47.941818 0 0 1 29.090909 47.941818v384.930909z m-137.309091-395.636364L496.872727 221.090909a37.003636 37.003636 0 0 0-32.814545 0L193.861818 375.854545s-17.92 10.705455-17.687273 25.134546 0 323.956364 0 323.956364a23.272727 23.272727 0 0 0 10.007273 17.454545c10.007273 6.981818 279.272727 162.909091 279.272727 162.909091a30.487273 30.487273 0 0 0 27.694546 0c16.756364-9.309091 274.850909-158.021818 274.850909-158.021818s15.127273-6.516364 15.127273-35.141818v-80.756364l-302.545455 183.854545V744.727273a70.981818 70.981818 0 0 1 23.272727-48.174546L772.654545 535.272727a56.785455 56.785455 0 0 0 12.8-33.978182v-72.378181l-305.105454 184.32v-74.472728a51.665455 51.665455 0 0 1 19.316364-41.658181z m222.487273-259.490909a9.076364 9.076364 0 0 0-8.610909-9.774545H884.363636V24.669091c0-3.723636-6.050909-5.12-12.334545-5.12L837.818182 25.134545c-4.189091 0-7.214545 2.792727-7.214546 5.352728V88.436364H768a9.309091 9.309091 0 0 0-8.378182 8.610909v46.545454h69.818182V209.454545c0 3.723636 6.050909 6.283636 12.567273 5.352728l35.141818-5.818182c4.189091 0 6.749091-3.025455 6.749091-5.352727V142.894545h69.818182z' fill='%23409EFF'/%3E%3C/svg%3E")`,
    Echarts: `url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024'%3E%3Cpath d='M512 0C229.236364 0 0 229.236364 0 512s229.236364 512 512 512 512-229.236364 512-512S794.763636 0 512 0z m352.395636 750.545455c-0.791273-0.930909-1.861818-1.629091-2.234181-2.653091-24.529455-65.629091-57.716364-74.612364-109.381819-29.463273-106.728727 93.277091-255.953455 109.614545-379.904 41.565091-130.327273-71.493818-199.074909-230.167273-156.253091-360.820364 46.545455-141.917091 205.265455-214.900364 340.805819-156.718545 139.357091 59.810909 197.352727 222.301091 126.929454 355.560727-4.328727 8.145455-9.681455 15.778909-13.358545 24.203636-12.706909 29.090909-1.675636 60.416 25.367272 73.541819a55.854545 55.854545 0 0 0 73.541819-25.367273c13.358545-27.554909 2.932364-57.949091-25.506909-73.169455-5.957818-3.211636-12.613818-5.026909-21.504-8.517818 45.754182-30.254545 91.927273-13.684364 100.026181 34.304 2.420364 14.522182 5.026909 20.433455 19.968 25.553455 46.126545 15.825455 55.156364 62.184727 21.504 101.934545z' fill='%23A9314D'/%3E%3C/svg%3E")`,
    Vue: `url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024'%3E%3Cpath d='M615.6 123.6h165.5L512 589.7 242.9 123.6H63.5L512 900.4l448.5-776.9z' fill='%2341B883'/%3E%3Cpath d='M781.1 123.6H615.6L512 303 408.4 123.6H242.9L512 589.7z' fill='%2334495E'/%3E%3C/svg%3E")`
}

const _default = defineComponent<{ href?: string, icon?: Icon }>(props => {
    const { icon, href } = props
    const { default: default_ } = useSlots()
    const iconClz = css`
        width: 0.8rem;
        height: 0.8rem;
        background-size: 100%;
        margin-inline-end: 4px;
    `
    return () => (
        <ElLink href={href} target="_blank">
            {icon ? <div class={iconClz} style={{ backgroundImage: ICON_BACKGROUND[icon] }} /> : null}
            {default_ ? h(default_) : href ?? ''}
        </ElLink>
    )
}, { props: ['href', 'icon'] })

export default _default